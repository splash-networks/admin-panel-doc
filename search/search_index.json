{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#documentation-home","title":"Documentation Home","text":"<p>This is a basic guide for setting up and performing common tasks on Splash Air.</p>"},{"location":"#introduction","title":"Introduction","text":"<p>The Splash Air application has 2 main purposes:</p> <ol> <li>Creating external captive portals</li> <li>Providing a user-friendly interface for viewing and exporting user data</li> </ol>"},{"location":"#terminology","title":"Terminology","text":"<p>It is important to familiarize yourself with the following terminology to understand the sequence of steps required to set up the system.</p>"},{"location":"#business","title":"Business:","text":"The organization in which portal is being deployed, such as Starbucks or Harvard University. A business can have several venues."},{"location":"#venue","title":"Venue:","text":"The location or site where portal is being deployed, such as Starbucks Dubai Mall or Harvard Law School."},{"location":"#template","title":"Template:","text":"The template refers to the design of a portal splash page typically including logo, background, fonts, colors, form fields, and terms and conditions. It also specifies the portal flow i.e. the process a user has to complete to gain network access, such as verifying their contact information via a One Time Password (OTP). It is hardware-agnostic."},{"location":"#portal","title":"Portal:","text":"A portal is defined by attaching a template to a particular venue and hardware type such as Aruba or Unifi. It can have several unique parameters and settings such as URL, session timeout, Redirect URL etc. for each particular hardware type."},{"location":"#configuration-steps","title":"Configuration Steps","text":"<p>The typical flow of operations when working on a new deployment of Splash Air would be like this:</p> <p></p>"},{"location":"defining-templates/","title":"Defining Templates","text":""},{"location":"defining-templates/#setting-up-templates","title":"Setting up Templates","text":"<p>In the Templates tab you can add a new template using the New template button. When creating a new template you can modify the logo and the text fields according to your preference. The field selector section allows you to enable/disable various fields like Email and Phone number based on your requirements. You can change the font, button color, and placeholders for fields. Also, you can add a Background Image. The changes will be displayed in real time on the panel on the right side.</p> <p></p>"},{"location":"defining-templates/#fields","title":"Fields","text":"<p>The following fields are supported on the captive portal:</p> Field Comments First Name User's first name Last Name User's last name Email In <code>OTP</code> and <code>Link</code> flow email address is verified Company Typically used in corporate environments Phone In OTP flow phone number is verified via SMS Address Link Flow dynamic session extension not supported Announcement A field on top of the portal for relevant announcements Image Ad An image used for advertisement Video Ad A video used for advertisement Terms of Service Detailed terms of service to which user must agree Marketing otp-in Checkbox for marketing consent Password User must enter password to proceed <p>The placeholders for each field can be changed in the Placeholders section of the template.</p>"},{"location":"defining-templates/#flow","title":"Flow","text":"<p>There are 4 types of user authorization flows that are currently supported:</p> <ul> <li>Simple</li> <li>OTP</li> <li>Link</li> <li>Payment (beta)</li> </ul>"},{"location":"defining-templates/#simple-flow","title":"Simple Flow","text":"<p>In Simple Flow the user enters their email and mobile number data but does not have to go through OTP based verification.</p> <p>Here is an example of Simple flow:</p>"},{"location":"defining-templates/#otp-flow","title":"OTP Flow","text":"<p>In OTP Flow the user has to verify their data using an OTP (One Time Password). You can setup either email verification or mobile number verification.</p> <p>Here is an example of OTP flow:</p> <p>Note: You need to enter SMTP parameters for email verification, and API credentials of your SMS provider - such as Twilio - for SMS verification, in Global Settings.</p>"},{"location":"defining-templates/#link-flow","title":"Link Flow","text":"<p>In Link Flow the user has to verify their email address by clicking on a verification link. The user is given internet access briefly, typically for 5 min, so they can access their email for completing verification. If they don't verify their email address during that time, they will be unauthorized from the network. If they do verify their email address, their session will be extended - whether the extension will be applied dynamically on existing session or will apply the next time they connect depends on the hardware type. For details refer to the compatibility matrix below - in comments it's mentioned whether dynamic session extension is supported or not.</p> <p>Here is an example of Link flow:</p> <p>Note: You need to enter SMTP parameters for email verification in Global Settings.</p>"},{"location":"defining-templates/#email-based-otp-verification-caveat","title":"Email Based OTP Verification Caveat","text":"<p>Our recommended flow for email verification is Link flow.</p> <p>Implementing email based OTP verification is not recommended. A user in captive state does not have complete internet access, so they will not be able to check their email on the same device. Either they would need another device to check their email, or they would need to have cellular internet on the same device to receive email via that. Additionally, on iOS devices the Captive Network Assistant (CNA) launches a browser that does not allow switching to another window. If you switch to a different window for checking email the browser will close, thus leaving the verification process incomplete.</p>"},{"location":"defining-templates/#payment-flow","title":"Payment Flow","text":"<p>In Payment Flow the user makes payment to get internet access. It's possible to set up different payment plans such as daily/weekly/month and have different bandwidth rate-limits per plan, such as 10 Mbps upload/download, or 5 Mbps upload and 20 Mbps download, etc.</p> <p>Here is an example of Payment flow using Stripe as the payment gateway:</p> <p>Note: You need to enter Stripe API keys in Global Settings and create payment plans in Plans section. Moreover, you will need to add walled garden entries to your device.</p>"},{"location":"defining-templates/#surveys","title":"Surveys","text":"<p>To add a survey to the template click on the Survey dropdown and select a survey (created in the Surveys tab). There are 2 options for presenting the survey to users:</p> <ul> <li>Immediately: survey will be shown to first-time users after they enter their data</li> <li>Returning Users: survey will not be shown to first-time users, and will be only shown to a user on a repeat visit. The Show After (Hours) option specifies that the survey will be shown to a repeat user only after this many hours since their initial visit have elapsed</li> </ul> <p>The first option is useful if all users are required to complete the survey. The second option is more relevant in cases where a user's feedback is solicited after they've experienced a service (such as a hotel customer required to complete a survey after 24 hours).</p> <p>Once a user has submitted a survey they will not be required to complete it again.</p>"},{"location":"defining-templates/#hardware-and-template-flow-compatibility-matrix","title":"Hardware and Template Flow Compatibility Matrix","text":"<p>The following compatibility matrix shows valid combinations of hardware and flow types along with comments:</p> Hardware/Flow Simple OTP Link Payment Comments Aruba Instant On Link Flow dynamic session extension not supported Cambium Link Flow dynamic session extension not supported Cisco Link Flow dynamic session extension not supported Coova Chilli Link Flow dynamic session extension not supported Draytek Link Flow dynamic session extension not supported Fortinet Link Flow dynamic session extension not supported Huawei Link Flow dynamic session extension not supported Mikrotik Mikrotik with RADIUS Link Flow dynamic session extension supported with RADIUS CoA Open Mesh Link Flow dynamic session extension not supported OpenNDS TP-Link Omada Link Flow dynamic session extension not supported Ruckus One Link Flow dynamic session extension not supported Ruckus SmartZone Link Flow dynamic session extension not supported Ruckus Unleashed Link Flow dynamic session extension not supported Ruijie Link Flow dynamic session extension support Ubiquiti Unifi Link Flow 24-hr session extension supported"},{"location":"defining-templates/#preview-template","title":"Preview Template","text":"<p>You can click on the preview changes button on the top right to view a full screen preview for mobile, tablet and desktop in portrait and landscape orientation.</p> <p></p> <p>In the full screen preview you can use the buttons on the top to toggle between mobile, tablet and desktop view and switch orientation between portrait and landscape. This lets you visualize the captive portal as users will see it.</p> <p></p>"},{"location":"defining-templates/#appearance","title":"Appearance","text":"<p>The following additional options are available to control the appearance of the portal:</p> <p>Design: 2 designs are currently available</p> <p>Background: background image for desktop and tablet</p> <p>Background mobile: background image for mobile</p> <p>Footer: A footer to add company branding, links, or credits</p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#login","title":"Login","text":"<p>This is the login screen. You will login using your provided credentials.</p>"},{"location":"getting-started/#dashboard","title":"Dashboard","text":"<p>After successful login you will see a dashboard like this showing you some quick stats about your sites.</p> <p></p>"},{"location":"getting-started/#adding-businesses-and-venues","title":"Adding Businesses and Venues","text":"<p>In the Businesses tab you can add a new business by clicking on the New business button. After providing the business details its entry will be added:</p> <p></p> <p>Each business can have multiple venues. You can go to the Venues tab to add venues using the New venue button:</p> <p></p>"},{"location":"getting-started/#periodic-reports","title":"Periodic Reports","text":"<p>Under venue settings you have the option of enabling periodic reports. The reporting frequency can be daily/weekly/monthly. It will contain the data of customers and visits to that venue for the selected duration and will be emailed to the provided email addresses.</p> <p></p>"},{"location":"getting-started/#email-marketing","title":"Email Marketing","text":"<p>You can upload customer data such as name, email address, phone number, etc. obtained via captive portal at a venue to your email marketing provider's account such as Mailchimp or Brevo. For that you need to select your Email Marekting Provider in Global Settings, and add their API parameters. Then, in Venues you can add/select the contact list to which those contacts will be uploaded.</p>"},{"location":"global-settings/","title":"Global Settings","text":"<p>In Admin &gt; Global Settings you can edit the global settings related to timezone, country, SMS and email options.</p> <p>Timezone controls all the timestamps in the application, such as visit time and customer creation time.</p> <p>Country controls which country is selected as the default in a portal template's phone number field (for details refer to the section on defining templates)</p> <p></p> <p>The SMS Provider field can be used to select the default SMS provider when using SMS OTP based user authorization. Currently supported SMS providers are Twilio, Unifonic and TextBee. Each provider has their own API parameters like Auth Token, SenderID etc that need to be added under that provider's settings. It is recommended to use the Test SMS button to send a test SMS to ensure SMS functionality is successfully integrated before using this feature in a captive portal.</p> <p>If SMS OTP based verification is not used then this field is not relevant.</p> <p>SMTP settings are required if these email based features need to be used:</p> <ul> <li>Venue reports</li> <li>Email OTP based user authorization</li> <li>Email link based user authorization</li> </ul> <p>You can use SMTP settings from an email service provider such as Sendgrid. It is recommended to use the Test Email button to send a test email to ensure email functionality is successfully integrated before using this feature in a captive portal.</p>"},{"location":"global-settings/#multi-tenancy","title":"Multi-tenancy","text":"<p>Multi-tenancy allows a single instance of Splash Air to serve multiple tenants. Each tenant will have an isolated view of the application. All the data of a tenant related to customers, visits, templates, portals etc. will not be visible to other tenants.</p> <p>Each tenant is called a team. Each team can have one or more businesses, and each business can have one or more venues. Portals will be created on a per-venue basis.</p> <p></p> <p>Multi-tenancy can be enabled by checking multitenancy option. Click on the Save changes button to apply the setting.</p> <p></p> <p>Once multi-tenancy has been enabled a Teams option will appear in the left sidebar. Accessing this option will allow you to create new teams. A root team called <code>default</code> is present from the start and cannot be removed.</p> <p>You can click on the New team button to create a new team.</p> <p></p> <p>The next step is to go to Users and click on the New user button to create a user for this team. </p>"},{"location":"global-settings/#user-roles","title":"User Roles","text":"<p>There are 3 roles:</p> <ol> <li>Super Admin: a global user that has full visibility of the application including the data of all teams, and can add/delete/update all data such as businesses, venues, templates, portals, customers and visits</li> <li>Admin: a team user that is a part of one or more teams</li> <li>Viewer: a global user that has read-only visibility of the application including the data of all teams, but cannot make any changes</li> </ol> <p>For a tenant you should create a user with Admin role.</p> <p></p> <p>Once the user is created go back to team and click on the team to which this user should be added. Then, click on the Attach button and select the user in the Attach user modal.</p> <p></p> <p>Click on the Attach button to bind this Admin account to the selected team/tenant.</p>"},{"location":"global-settings/#team-login","title":"Team Login","text":"<p>The Admin user belonging to any team will use the following URL to login to the application: <code>https://&lt;Application Hostname&gt;/app</code></p> <p>If the application URL is <code>https://example.com</code>, then the login URL for team users will be <code>https://example.com/app</code>. Only Super Admins and Viewers will be able to login using <code>https://exmaple.com</code>. Teams will have to use the <code>/app</code> path.</p> <p>After login a team user will be able to perform all the operations of the application normally such as creating new businesses, venues, templates, and portals etc.</p>"},{"location":"global-settings/#payment-gateway","title":"Payment Gateway","text":"<p>To use Payment Flow a payment gateway needs to be set up. Currently supported payment gateway is Stripe. Its API keys obtained from your Stripe account should be added to Global Settings in Stripe Payment section:</p> <p></p> <p>These walled garden entries for Stripe should also be added.</p>"},{"location":"global-settings/#two-factor-authentication","title":"Two Factor Authentication","text":"<p>In Global Settings &gt; Security you can enable this checkbox to force all users to use Two Factor Authentication.</p> <p></p> <p>To enable 2-factor authentication using Google Authenticator or a similar app go to a user's account properties by clicking on the user avatar icon on the top right.</p> <p></p> <p>In the Two Factor Authentication section click on the Enable button:</p> <p></p> <p>Then scan the provided 2FA code using an authenticator application on your phone.</p>"},{"location":"global-settings/#email-marketing","title":"Email Marketing","text":"<p>To upload customer records to your email marketing provider you can select your provider such as Mailchimp or Brevo from the Email Marketing Provider dropdown. Once selected, you'll need to enter your respective platform's API key below.</p> <p>Then, go to the Venues tab and click the Venue for which you want to enable this feature. Then select the list/audience to which contacts should be uploaded.</p>"},{"location":"global-settings/#white-label","title":"White Label","text":"<p>If you have obtained a white label license then you can implement that in Global Settings. You have the option of adding regular and dark mode logo. In the Logo Upload section you can upload your logo like this:</p> <p></p> <p>Your logo will be shown in the top left corner instead of the original Splash Networks logo. Similarly, it will also be shown as the default placeholder logo when you create a new template.</p> <p></p> <p>Similarly, you can add a favicon icon in Upload Favicon section. There are several online tools for creating a favicon icon file from a PNG or JPG file, such as favicomatic.</p> <p></p>"},{"location":"plans/","title":"Plans","text":"<p>To create payment plans for Payment flow go to Plans and create a new plan.</p> <p>Enter the following parameters for it:</p> <ul> <li>Name: a name to identify the plan</li> <li>Description: Optional description about the plan</li> <li>Status: To control whether the plan will be shown in the payment flow or not. Default is <code>Active</code></li> <li>Price: The price of the plan. It should match the plan's price configured in the payment gateway</li> <li>Number of Days: The duration for which the plan will be active after purchase</li> <li>Upload Speed: Bandwidth rate-limit for upload</li> <li>Download Speed: Bandwidth rate-limit for download</li> <li>Volume Cap: Volume quota*</li> </ul> <p>*Note on volume quota: volume quota is calculated when a user connects. It does not affect a user's existing session. If a user exceeds their plan's volume they will not be able to connect the next time they attemp to connect.</p> <p></p>"},{"location":"plans/#payment-configuration","title":"Payment Configuration","text":"<p>In payment configuration select a payment method such as Stripe. Note that Stripe API keys will need to be configured in Global Settings.</p> <p>For Stripe a Product ID and Price ID needs to be added.</p> <p></p> <p>Note: the product needs to have a One-off price. It should not be a subscription.</p>"},{"location":"radius/","title":"RADIUS","text":"<p>Some vendors require the use of RADIUS in their captive portal authorization flows (e.g. HPE/Aruba Instant On). These instructions can be used to set up a RADIUS server using FreeRADIUS.</p>"},{"location":"radius/#freeradius-setup","title":"FreeRADIUS Setup","text":"<p>Install FreeRADIUS:</p> <pre><code>apt-get install freeradius freeradius-mysql freeradius-utils\n</code></pre> <p>Allow all NAS clients to connect to it:</p> <pre><code>nano /etc/freeradius/3.0/clients.conf\n</code></pre> <p>Add the following lines at the end (replace <code>testing123</code> with a more secure secret):</p> <pre><code>client all {\n       ipaddr          = 0.0.0.0/0\n       secret          = testing123\n}\n</code></pre> <p>Authenticate all users without checking username/password:</p> <pre><code>nano /etc/freeradius/3.0/users\n</code></pre> <p>Add the following on top:</p> <pre><code>DEFAULT Auth-Type := Accept\n</code></pre> <p>Restart FreeRADIUS service:</p> <pre><code>systemctl restart freeradius.service\n</code></pre>"},{"location":"surveys/","title":"Surveys","text":"<p>To create a survey go to Surveys tab and click on the New survey button. Enter a name for it. The following options are supported:</p> <ul> <li>is active: toggle switch to enable/disable the survey</li> <li>Email Notification: if enabled survey results will be emailed to venue admin(s)</li> </ul> <p>Multiple questions can be added, and the Required toggle button can be used to control whether the question is mandatory or can be skipped. If all the questions in a survey are not required, then the user can skip the survey altogether.</p> <p>For each question, the Type option controls what kind of response is supported - such as text, number, checkboxes, rating, etc.</p> <p>Once a survey has been created in can be referenced in a Template.</p> <p>The survey responses are available in the Survey Answers tab.</p>"},{"location":"users/","title":"Users","text":"<p>Users refer to administrative users that have access to Splash Air application for performing operational tasks such as creating portals and viewing customer data.</p> <p>To create a new user go to Users and click on the New user button. Enter a name, email address, and password, and select the role:</p> <p></p> <p>There are 2 types of user roles in Splash Air:</p> <ol> <li>Super Admin: a user that has full control of the application and can perform all operations</li> <li>Viewer: a user that has read-only visibility of the application and data but cannot make any changes</li> </ol> <p>If multi-tenancy is being used then the application has 3 roles instead of the two mentioned above.</p>"},{"location":"walled-garden/","title":"Walled Garden","text":"<p>To allow access to various services before captive portal authorization is complete you need to add these walled garden entries:</p>"},{"location":"walled-garden/#stripe","title":"Stripe","text":"<p>Stripe is a payment gateway used in <code>Payment</code> Flow type. White-list these domains for Stripe access:</p> <pre><code>api.stripe.com\ncheckout.stripe.com\nfiles.stripe.com\njs.stripe.com\nm.stripe.com\nm.stripe.network\nq.stripe.com\n</code></pre>"},{"location":"customer-data/","title":"Index","text":"<p>There are 2 ways of accessing customer data:</p> <ol> <li>Web</li> <li>API</li> </ol>"},{"location":"customer-data/api/","title":"Through API","text":""},{"location":"customer-data/api/#api-key-creation","title":"API Key Creation","text":"<p>To access customer data via API the first step is to create an API Key.</p> <p>Go to Admin &gt; Generate API Key and press the Generate button.</p> <p></p> <p>Copy the generated API Key as it will only be displayed once.</p> <p>You can use the same page to delete an existing key and create a new one if needed.</p> <p>This API key will need to set as the value of the <code>X-API-Key</code> header when making API requests.</p> <p>The URL for API requests will be:</p> <pre><code>https://&lt;hostname&gt;/api\n</code></pre> <p>This will be followed by the specific endpoint that you're querying.</p>"},{"location":"customer-data/api/#customers","title":"Customers","text":"<p>Customer data can be retrieved using the customers API. If using multi-tenancy replace <code>default</code> with the team identifier.</p> <pre><code>HTTP Verb: GET\nAPI Endpoint: /customers\n</code></pre> <p>Query parameters</p> Parameter Required Description slug Required Team ID per_page Optional Number of items per page page Optional Page number of paginated results start_date Optional Show records since this date end_date Optional Show records till this date <p></p>"},{"location":"customer-data/api/#customer-visits","title":"Customer Visits","text":"<p>Customer visit data can be retrieved using the customer-visits API. If using multi-tenancy replace <code>default</code> with the team identifier.</p> <pre><code>HTTP Verb: GET\nAPI Endpoint: /customer-visits\n</code></pre> <p>Query parameters</p> Parameter Required Description slug Required Team ID per_page Optional Number of items per page page Optional Page number of paginated results start_date Optional Show records since this date end_date Optional Show records till this date <p></p>"},{"location":"customer-data/web/","title":"Through Web","text":""},{"location":"customer-data/web/#customers","title":"Customers","text":"<p>The data entered by the customers appears in the Customers tab.</p> <p></p>"},{"location":"customer-data/web/#customer-visits","title":"Customer Visits","text":"<p>The data of customer visits to a particular venue can be seen in Customer Visits tab.</p> <p></p>"},{"location":"portals/","title":"Creating Portals","text":""},{"location":"portals/#creating-portals","title":"Creating Portals","text":"<p>This section contains configuration guides for creating portals and integrating them with various types of hardware.</p>"},{"location":"portals/aruba-instant-on/","title":"Aruba/HPE Instant On","text":"<p>To set up a portal for Aruba/HPE Instant On first you need to create a template.</p>"},{"location":"portals/aruba-instant-on/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Aruba Instant On</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/aruba-instant-on/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nDuration (seconds): the time in seconds for which a user is authorized on the network\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/aruba-instant-on/#instant-on-portal-settings","title":"Instant On Portal Settings","text":"<p>Login to your account on the HPE Instant On cloud and select the site on which you want to apply guest portal. Create a new Network of type <code>Guest</code>. In Network Options enable <code>Guest Portal</code>.</p> <p></p> <p>In Networks &gt; Guest Portal select Type <code>External</code>. In Portal URL select the Guest Portal URL that you copied earlier.</p> <p></p> <p>In Primary RADIUS add the details of your RADIUS server, such as IP address and shared secret (will be provided by Splash Networks' team).</p>"},{"location":"portals/aruba-instant-on/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/aruba-instant-on/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of HPE/Aruba Instant On:</p> <p></p>"},{"location":"portals/aruba/","title":"Aruba/HPE","text":"<p>To set up a portal for Aruba/HPE first you need to create a template.</p>"},{"location":"portals/aruba/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Aruba</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/aruba/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry (days): the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/aruba/#arubahpe-settings","title":"Aruba/HPE Settings","text":"<p>Login to your Aruba AP in instant mode via web and go to Configuration &gt; Networks. Select an existing network or create a new network on which you want to apply guest portal. Enter a name for it, and in Primary usage select <code>Guest</code>.</p> <p></p> <p>On the Next screen in Client IP assignment select <code>Virtual Controller managed</code> and in Client VLAN assignment select <code>Default</code>.</p> <p></p> <p>Click Next to go to the third screen. In Splash page type select <code>External</code>. In Captive portal profile click on the <code>+</code> icon to create a new profile. Enter a name for it and in Type select <code>RADIUS Authentication</code>. The Guest Portal URL noted earlier now needs to be input in the IP or hostname and URL fields in the following way:</p> <p>Suppose the Guest portal URL is: <code>https://admin.splashnetworks.co/arubai/site1</code>. It will be divided into 2 sections:</p> <ul> <li> <p>Hostname: <code>admin.splashnetworks.co</code></p> </li> <li> <p>URL: <code>/arubai/site1</code></p> </li> </ul> <p>Enter these values in IP or hostname and URL fields respectively. In Port enter <code>443</code>. Toggle Use HTTPS to on.</p> <p></p> <p>Click OK to save the profile. In Authentication server 1 click on the <code>+</code> sign. In Type select <code>RADIUS</code>. Enter a name for it, and in IP address and Shared key enter the details of your RADIUS server (will be provided by Splash Networks' team).</p> <p></p> <p>Click OK to save RADIUS profile. Keep the other options at default.</p> <p></p> <p>Click Next to go to the last screen. In Access Rules <code>Role-based</code> should be selected. In Roles click on the <code>+</code> icon to create a new role. Enter a name for it, such as <code>guest_portal</code>. The default access rule is set to Allow any to all destinations. Edit it and change the Action to <code>Deny</code>. Add a new rule with Destination type <code>to a particular server</code> to allow access to captive portal server. In IP enter the IP of Splash Air server. The remaining options will remain at their default values.</p> <p></p> <p>Bring your newly added rule to the top. Toggle Assign pre-authentication role option to On and in the dropdown menu select your newly created profile <code>guest_portal</code>. The final settings should look like this:</p> <p></p> <p>Click on Finish to save the settings.</p>"},{"location":"portals/aruba/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/aruba/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Aruba/HPE:</p> <p></p>"},{"location":"portals/cambium/","title":"Cambium","text":"<p>To set up a portal for Cambium first you need to create a template.</p>"},{"location":"portals/cambium/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Cambium</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/cambium/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: when using \"Link\" type Flow it is the URL to which a user is redirected after successful email verification\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/cambium/#cambium-settings","title":"Cambium Settings","text":"<p>Access Cambium cnMaestro using web interface. Go to Wi-Fi Profiles &gt; WLANs and select the profile on which you want to enable captive portal (or create a new one). In AAA Servers enter the IP address and secret of your RADIUS server (will be provided by Splash Networks' team).</p> <p></p> <p>In Guest Access tab, click on the Enable checkbox. In Portal Mode select <code>Enternal Hotspot</code>. Access Policy should be <code>RADIUS</code>. AP Server Protocol should be <code>HTTP</code>. In External Page URL enter the <code>Guest Portal URL</code> copied earlier.</p> <p></p> <p>Save the settings. In case you created a new WLAN profile you'll need to apply that to your AP Group.</p>"},{"location":"portals/cambium/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/cambium/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Cambium:</p> <p></p>"},{"location":"portals/cisco/","title":"Cisco","text":"<p>To set up a portal for Cisco WLC first you need to create a template.</p>"},{"location":"portals/cisco/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Cisco WLC</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/cisco/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/cisco/#cisco-wlc-settings","title":"Cisco WLC Settings","text":"<p>Access Cisco WLC using web interface and click on Advanced. Go to Security &gt; AAA &gt; RADIUS &gt; Authentication and add a new RADIUS server. The IP address and RADIUS secret shared by Splash Networks' support team will be entered here.</p> <p></p> <p>Click on Apply to save the settings. Then go to Security &gt; Access Control Lists &gt; Access Control Lists (or FlexConnect ACLs if you're using FlexConnect) and create a new ACL. Click on the ACL name and add a new rule to it. Configure these settings:</p> <pre><code>Sequence: 1\nSource: Any\nDestination: IP Address\nProtocol: Any\nDSCP: Any\nAction: Permit\n</code></pre> <p>In IP address enter the IP address of Splash Air server with Netmask <code>255.255.255.255</code>.</p> <p></p> <p>Similarly, add a new rule with Source equal to Splash Air IP address and Destination Any:</p> <p></p> <p>Go to Security &gt; Web Auth &gt; Web Login Page. In Web Authentication Type select <code>External (Redirect to external server)</code>. In Redirect URL after login enter a redirect URL (optional). In External Webauth URL enter the Guest Portal URL copied earlier. Click on Apply to save settings.</p> <p></p> <p>Next, go to WLANs and select the WLAN on which to apply guest portal. In Security &gt; Layer 3 set Layer 3 Security to be <code>Web Policy</code>. Below it select the Authentication option. In Preauthentication ACL select the ACL created previously. Check Over-ride Global Config option. In Web Auth type select External(Re-direct to external server) and in URL enter the Guest Portal URL.</p> <p></p> <p>Then go to Security &gt; AAA Servers and in Authentication servers check the Enabled button. In Server 1 add the RADIUS server created previously:</p> <p></p> <p>Scroll down to Authentication priority order for web-auth user. Use the arrows to ensure only RADIUS is in the <code>Order Used for Authentication</code> section:</p> <p></p> <p>Click on Apply to save the settings.</p> <p>Finally, go to Management &gt; HTTP-HTTPS and configure these settings:</p> <pre><code>HTTP Access: Enabled\nHTTPS Access: Enabled\nWebAuth SecureWeb: Disabled\nHTTPS Redirection: Disabled\n</code></pre> <p></p> <p>Click on Apply to save settings. WLC may need to be rebooted for these settings to take effect.</p>"},{"location":"portals/cisco/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/cisco/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Cisco WLC:</p> <p></p>"},{"location":"portals/coova-chilli/","title":"Coova Chilli","text":"<p>To set up a portal for Coova Chilli first you need to create a template.</p>"},{"location":"portals/coova-chilli/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Coova Chilli</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/coova-chilli/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/coova-chilli/#coova-chilli-settings","title":"Coova Chilli Settings","text":"<p>Coova Chilli is an open-source captive portal package which is used in many Linux based routers. This guide is written for OpenWRT. Our recommended OpenWRT firmware version is OpenWRT 19. Newer versions do not have <code>iptables</code> installed by default so Coova Chilli will not work out of the box. For newer firmwares we recommend using OpenNDS package instead of Coova Chilli.</p> <p>Access OpenWRT router/AP using LuCI web interface. By default, OpenWRT firewall does not allow web or SSH access on WAN IP. As a captive portal blocks all traffic on LAN until user is authenticated so when we initially enable captive portal on OpenWRT we would lose management access to the router. To manage OpenWRT we should therefore open access from WAN side. </p> <p>Go to Network &gt; Firewall &gt; Traffic Rules. Add a new rule with these properties:</p> <pre><code>Protocol: TCP\nSource zone: wan\nDestination zone: Device (input)\nDestination port: 80\n</code></pre> <p>Similarly, add another rule for <code>Destination port: 22</code>. Click on Save and apply. Once these rules are added you would be able to access OpenWRT via web and SSH from WAN side.</p> <p>Access your OpenWRT device over SSH using its WAN IP. Enter these commands:</p> <pre><code>opkg update\nopkg install coova-chilli nano\n</code></pre> <p>Open coova-chilli config file:</p> <pre><code>nano /etc/config/chilli\n</code></pre> <p>Make the following changes:</p> <p>option disabled 1: should be commented out</p> <p>option radiusserver1 <code>radius IP</code>: the IP of Splash Air should be added here</p> <p>option radiusserver2 rad02.chillispot.org: should be commented out</p> <p>option radiussecret <code>secret</code>: RADIUS secret should be entered here (will be provided by Splash Networks' team)</p> <p>option dhcpif <code>br-lan</code>: LAN interface such as <code>br-lan</code> or <code>eth0</code> should be given here</p> <p>option uamserver <code>Guest Portal URL</code>: the <code>Guest Portal URL</code> created earlier should be added here</p> <p>option uamsecret <code>secret</code>: UAM secret created earlier should be entered here</p> <p>Save and exit.</p> <p>To check chilli runtime settings use this command:</p> <pre><code>cat /var/run/chilli_&lt;config&gt;.conf\n</code></pre> <p>To apply the changes stop and start the service:</p> <pre><code>/etc/init.d/chilli stop\n/etc/init.d/chilli start\n</code></pre>"},{"location":"portals/coova-chilli/#helpful-commands","title":"Helpful commands","text":"<p>Enable/disable service</p> <pre><code>/etc/init.d/chilli enable\n/etc/init.d/chilli disable\n</code></pre> <p>Check online users</p> <pre><code>chilli_query list\n</code></pre> <p>Logout connected user</p> <pre><code>chilli_query logout &lt;MAC address&gt;\n</code></pre> <p>View logs</p> <pre><code>logread -f\n</code></pre>"},{"location":"portals/coova-chilli/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/coova-chilli/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Coova Chilli:</p> <p></p>"},{"location":"portals/datto/","title":"Datto","text":"<p>To set up a portal for Datto first you need to create a template.</p>"},{"location":"portals/datto/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Coova Chilli</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/datto/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/datto/#datto-settings","title":"Datto Settings","text":"<p>Access Datto Network Manager web portal and select the SSID on which captive portal needs to be enabled in Access Points &gt; SSID #.</p> <p>In Common tab, set an SSID in SSID name. Turn on the Enable option. In Authentication select <code>Open</code>.</p> <p></p> <p>Go to Captive Portal tab and turn on Splash page. In Splash page type select <code>Hosted remotely</code>. In Splash page URL enter the <code>Guest Portal URL</code> copied earlier. In Splash page secret enter the secret created earlier.</p> <p></p> <p>In Splash page authentication type select <code>RADIUS</code>. In Server address 1 and Server secret enter the IP address and secret of your RADIUS server (will be provided by Splash Networks' team). Keep the Use MAC addr for password option off. In Client force timeout select a session timeout value. Block unauthenticated users should be on.</p> <p>Go to Advanced tab. Block LAN access, Client isolation and DNS Intercept should be on.</p>"},{"location":"portals/datto/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/datto/#traffic-flow","title":"Traffic Flow","text":"<p>For traffic flow refer to the traffic flow section of Coova Chilli here.</p>"},{"location":"portals/datto/#pre-auth","title":"Pre Auth","text":"<p>Datto devices perform a pre-auth process when a user comes online. It sends a RADIUS Access-Request with that user's MAC address as User-Name and empty User-Password (can be changed to MAC address by using the Use MAC addr for password toggle in Network Manager settings). If RADIUS accepts that request the user won't see the captive portal at all and would have internet directly. If you are using the RADIUS settings given here then add the following line at the top of <code>/etc/freeradius/3.0/users</code> file:</p> <pre><code>DEFAULT User-Password == \"\", Auth-Type := Reject\n</code></pre> <p>This will ensure that the portal always pops up for the client.</p>"},{"location":"portals/draytek/","title":"Draytek","text":"<p>To set up a portal for Draytek first you need to create a template.</p>"},{"location":"portals/draytek/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>DrayTek</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/draytek/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry (days): the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/draytek/#draytek-settings","title":"Draytek Settings","text":"<p>Access Draytek device using web interface. Go to Hotspot Web Portal &gt; Profile Setup and click on an available index such as 1. Configure the following parameters:</p> <pre><code>Enable this profile: check\nPortal Method: External Portal Server\nCaptive Portal URL: &lt;Guest Portal URL&gt;\nRedirection URL: http://portal.draytek.com\n</code></pre> <p></p> <p>In RADIUS Server section click on the <code>External RADIUS Server</code> link. Check the Enable option, and under Primary Server section enter the IP address and RADIUS secret shared by Splash Networks' support team in <code>Primary Server</code> and <code>Secret</code> fields.</p> <p></p> <p>Click on OK to save RADIUS settings. A router reboot will be required at this point. Once the router is accessible again continue on to the next steps.</p> <p>In Whitelist Setting click on Dest IP tab and enter the IP address of Splash Air server and enable it.</p> <p></p> <p>Click on Save and Next to see the final step in Profile Setup. In Web Portal Options configure these settings:</p> <p>Press Save and Next to continue. Then configure the following attributes:</p> <pre><code>HTTPS Redirection: uncheck\nCaptive Portal Detection: check\n</code></pre> <p>In Landing Page After Authentication select <code>User Requested URL</code>. In WLAN select the SSID on which to apply captive portal. Click Finish to save settings.</p>"},{"location":"portals/draytek/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/draytek/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Draytek:</p> <p></p>"},{"location":"portals/fortinet/","title":"Fortinet","text":"<p>To set up a portal for Fortinet FortiGate firewall first you need to create a template.</p>"},{"location":"portals/fortinet/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Fortinet</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/fortinet/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/fortinet/#fortigate-settings","title":"FortiGate Settings","text":"<p>Access FortiGate firewall using web interface. Go to Network &gt; Interfaces and select the interface on which you want to enable captive portal. Typically, it will be the LAN gateway interface.</p> <p></p> <p>Click on Edit to modify its settings. Enable Security mode &gt; Captive Portal. In Authentication Portal, select <code>External</code> and enter the Guest Portal URL generated when creating the portal in Splash Air. In Exempt destination/services create a new entry and add the IP address of Splash Air application server in it.</p> <p></p> <p>In Redirect after Captive Portal you can specify a URL to which the URL will be redirected after successful portal authorization.</p> <p>Click OK to save the settings.</p> <p>Go to User &amp; Authorization &gt; RADIUS Servers and create a new RADIUS server. The IP address and RADIUS secret shared by Splash Networks' support team will be entered here.</p> <p>Then go to User &amp; Authorization &gt; User Groups and create a new group. Add the RADIUS server selected in the previous step and click on OK to save it.</p> <p>Go back to Network &gt; Interface and select the interface on which captive portal is enabled. In User access select <code>Restricted to Groups</code> option. In <code>User groups</code> add the group that you created in the last step. Click OK to save the settings.</p> <p></p>"},{"location":"portals/fortinet/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/fortinet/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of FortiGate firewall:</p> <p></p>"},{"location":"portals/fortinet/#radius-test","title":"RADIUS Test","text":"<p>To test your RADIUS server You can go to User &amp; Authentication &gt; RADIUS Servers. Select your RADIUS server and click on Test User Credentials. Here you can enter a username and password combination to see whether it passes RADIUS authorization or not.</p> <p></p>"},{"location":"portals/huawei-imaster/","title":"Huawei iMaster NCE-Campus","text":"<p>To set up a portal for Huawei first you need to create a template.</p>"},{"location":"portals/huawei-imaster/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Huawei</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/huawei-imaster/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry (days): the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/huawei-imaster/#huawei-imaster-nce-campus-settings","title":"Huawei iMaster NCE-Campus Settings","text":"<p>Access iMaster NCE-Campus using web interface. Go to Design &gt; Template Management &gt; ACL. Create a new ACL. Set a name and number for it. Add a rule for the domain of your portal like this:</p> <p>Add another rule for UDP port 53 (to allow DNS traffic).</p> <p></p> <p>Then go to URL Template and create a new template. Specify a name for it. In Template type select <code>Cloud platform-relayed authentication</code>. In Carried parameter add the following parameters along with their values:</p> Parameter Parameter Name user-ip userip user-mac usermac loginurl url <p></p> <p>Click OK to save the template.</p> <p>Go to RADIUS Relay Server and create a new template. Enter a name for it. Authentication service should be <code>Portal</code>. In Authentication server section add a new server. Enter the IP address and Secret of your RADIUS server (will be provided by Splash Networks' team) and click on the submit button to save it. In Authentication protocol select <code>PAP</code>. Keep the other settings at default and click OK to save the template.</p> <p></p> <p>Next, go to Provision &gt; Device &gt; Site Configuration &gt; AP and create a new SSID (or modify an existing one). Enter the following settings:</p> <ul> <li>SSID name: enter an SSID</li> <li>Data forwarding mode: <code>Direct</code></li> <li>Global DHCP address pool: enabled</li> </ul> <p>Click Next to go to the next page. Configure the following settings here:</p> <ul> <li>WLAN security policy: Open network =&gt; <code>Open + Portal authentication</code></li> <li>Page pushing mode: <code>Cloud platform relay authentication</code></li> <li>Interconnection mode: <code>RADIUS relay</code></li> <li>Page push protocol: <code>HTTPS</code></li> </ul> <p>Under Third-party portal page authentication parameters enter these values:</p> <ul> <li>Username: <code>username</code></li> <li>Password parameter name: <code>password</code></li> <li>Redirect URL matching: <code>Fixed URL</code></li> <li>Redirect URL upon authentication success: a redirect URL such as <code>https://www.google.com</code></li> <li>RADIUS relay server: select the RADIUS relay server created in the previous step</li> <li>Default permit rule: select the ACL created previously</li> <li>Bypass policy: <code>Authenticated users can continue accessing the network, and new users are not allowed to access the network.</code></li> </ul> <p>Click Next to go to the next page. Keep all the settings at default and click OK to save.</p> <p>Finally, go to Admission &gt; Admission Resource &gt; Page Management &gt; Portal Page Push Policy. Enter a name for it. In Push Rule enable Match SSIDs and add the SSID created in the last step. In Page Push Rule use the following settings:</p> <ul> <li>Authentication mode: <code>Cloud platform-based relay authentication</code></li> <li>Interconnection mode: <code>RADIUS relay</code></li> <li>URL template: select the URL template created previously</li> <li>Third-party authentication URL: enter the Guest Portal URL created earlier in Splash Air</li> </ul>"},{"location":"portals/huawei-imaster/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/huawei-imaster/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Huawei iMaster NCE-Campus:</p> <p></p>"},{"location":"portals/huawei/","title":"Huawei FIT/FAT AP","text":"<p>To set up a portal for Huawei first you need to create a template.</p>"},{"location":"portals/huawei/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Huawei</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/huawei/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry (days): the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/huawei/#huawei-fat-ap-settings","title":"Huawei FAT AP Settings","text":"<p>Note: There are 2 captive portal modes supported on Huawei: HTTP and HTTPS. HTTP is simpler to set up but is less secure and will not work on iOS devices. The use of HTTPS is recommended as it is more secure and supported by all devices. The setup for HTTPS mode requires a few more steps so the procedure for setting it up is given at the end.</p>"},{"location":"portals/huawei/#http-setup","title":"HTTP Setup","text":"<p>Login to your Huawei FAT AP using its web interface. Go to Configuration &gt; Internet Configuration and make sure Internet access mode is <code>Gateway</code> and NAT is On.</p> <p></p> <p>Similarly, ensure that the LAN interface on which you want to enable portal is using DHCP from the AP.</p> <p>Go to Advanced &gt; Security &gt; ACL &gt; User ACL Settings. Create a new ACL and give it a number such as <code>6000</code> and a name such as <code>splash</code>. This ACL will be used for pre-authentication access, also known as walled garden. Enter a new rule in it to permit traffic for UDP destination port <code>53</code> to allow access to DNS servers.</p> <p></p> <p>Similarly, add another rule to permit access to the AP from LAN. In this example the AP LAN interface has the IP of <code>192.168.50.1</code>.</p> <p></p> <p>Then go to Advanced &gt; Security &gt; AAA and in Portal Server Global Configuration switch to External Portal tab. Check the HTTP Protocol option and in HTTP interoperation mode select <code>HTTP-based</code>. In Local gateway address select <code>All addresses</code>. Click Apply to save the settings.</p> <p></p> <p>In Portal Authentication Server List click on the Create button. In Server name enter a name for the server. In Server IP enter the IP of Splash Air server and click on the <code>+</code> button to add it. In Protocol type select <code>HTTP/HTTPS</code>. In URL enter the <code>Guest Portal URL</code> obtained earlier.</p> <p></p> <p>Navigate down to URL Option Settings and set up the following options:</p> <ul> <li>User IP address keyword: <code>userip</code></li> <li>User MAC keyword: <code>usermac</code></li> <li>Login URL keyword/Login URL: <code>url</code>. The value of the URL will be based on your LAN gateway IP. For gateway IP of <code>192.168.50.1</code> the value will be <code>http://192.168.50.1:8000</code></li> </ul> <p></p> <p>(Optional) To set a redirect URL to which the user is redirected after successful portal login expand Parameter Parsing Configuration section. In Login success response select <code>Redirect to the specified URL</code>. Then, enter a URL to which the user should be redirected:</p> <p></p> <p>Click OK to save the settings.</p> <p>Next, go to Advanced &gt; Security &gt; AAA &gt; RADIUS tab and create a new RADIUS Server Profile. Enter the IP address and Secret (will be provided by Splash Networks' team) and check the Authentication option.</p> <p></p> <p>In Profile default shared key input the same RADIUS secret added earlier.</p> <p></p> <p>Click OK to save RADIUS profile. Then go to Advanced &gt; HTTP Access tab. In Access mode select <code>HTTP</code> and in Local gateway address select <code>Any address</code>.</p> <p></p> <p>Click on Apply to save the settings.</p> <p>Finally, go to Configuration &gt; WLAN Configuration and create a new SSID (or select an existing SSID) to enable captive portal on it. In Step 1 enter a SSID and select the interface VLAN of LAN side (which should have DHCP configured).</p> <p>Click Next to go to the second step. In Security settings select <code>Portal</code>. In Portal server select <code>External Portal server</code>. Uncheck MAC address-prioritized option. In External Portal Server Configuration select the server template that you created earlier. Similarly, in External RADIUS Server Configuration select the RADIUS template that you created earlier.</p> <p></p> <p>In Authentication-free Rule select Control mode <code>ACL</code>. In ACL number select the ACL that you created earlier.</p> <p>Click Next to go to the last step. In Step 3 keep the default settings and click Finish to save the settings.</p>"},{"location":"portals/huawei/#https-setup","title":"HTTPS Setup","text":"<p>To set up HTTPS you first need 2 things:</p> <ol> <li>TLS certificate</li> <li>DNS record pointing to your Huawei AP</li> </ol>"},{"location":"portals/huawei/#tls-certificate","title":"TLS Certificate","text":"<p>In this example we have used Let's Encrypt to obtain a TLS certificate for free. The domain in our case is <code>huawei.splashnetworks.co</code> which is configured to point to the WAN IP of Huawei AP.</p> <pre><code>certbot certonly --manual --preferred-challenges dns --key-type rsa --rsa-key-size 2048 -d huawei.splashnetworks.co\n</code></pre> <p>It will generate a DNS challenge to verify domain ownership. After completing that it will produce 4 files:</p> <ol> <li><code>privkey.pem</code></li> <li><code>cert.pem</code></li> <li><code>chain.pem</code></li> <li><code>fullchain.pem</code></li> </ol> <p>Huawei requires the private key to be password protected which it is currently not. Here's how to password protect it:</p> <pre><code>openssl rsa -aes256 -in privkey.pem -out privkey_encrypted.pem\n</code></pre> <p>It will ask for a password and then output <code>privkey_encrypted.pem</code> file.</p> <p>Before uploading the certificate to AP we need to combine the private key and certificate in a single file. Create a consolidated file <code>combined.pem</code> like this:</p> <pre><code>cat privkey_encrypted.pem fullchain.pem &gt; combined.pem\n</code></pre> <p>On Huawei AP go to Advanced &gt; Security &gt; Certificate Management and click on Upload Certificate. Enter a name for it, and in Certificate type select <code>Local+CA+Private key</code>. In Certificate format select <code>PEM</code>. Upload the <code>combined.pem</code> in Certificate file and provide its password.</p> <p>Click OK to save. Then go to Advanced &gt; Security &gt; SSL and create a new SSL policy. In SSL policy name input a name for the policy. In SSL policy type select <code>Server</code>. In Certificate name select the certificate created in the previous step. Keep the remaining values at their default and click OK to save.</p> <p></p> <p>Now you can apply this SSL policy to the AP so it doesn't show a certificate warning on web login. Access the AP using SSH and deploy the SSL policy created in the previous step using command-line:</p> <pre><code>[huawei-AP] http secure-server ssl-policy splash\n</code></pre>"},{"location":"portals/huawei/#https-configurations","title":"HTTPS Configurations","text":"<p>Assuming HTTP configurations described above are already in place, a few modifications are required to switch from HTTP to HTTPS mode.</p> <p>Go to Advanced &gt; AAA &gt; Portal Server Global Configuration and switch to External Portal tab. In HTTP Protocol section switch to <code>HTTPS-based</code> in HTTP interoperation mode. Select the SSL policy created above and in Local gateway address select <code>All addresses</code>. Port number will be <code>8443</code>. Click Apply to save the settings.</p> <p></p> <p>In Portal Authentication Server List click on the existing server to access its details. Expand URL Option Settings and update the <code>Login URL</code> based on your Huawei AP's hostname. If your AP has a hostname of <code>huawei.splashnetworks.co</code> then enter this URL:</p> <pre><code>https://huawei.splashnetworks.co:8443\n</code></pre> <p>It should appear like this:</p> <p></p> <p>Click on OK to save the changes. Then go to Advanced &gt; Security &gt; ACL &gt; Domain Name Configuration. Click on Create to add a domain which we will later reference in our ACL. Enter an ID and your domain like this:</p> <p>Then go to User ACL Settings tab and add a new rule to your existing ACL to permit the domain created in the last step by adding it in Dest domain name:</p> <p></p> <p>HTTPS configuration is now complete. No change is required on Splash Air to support HTTPS mode.</p>"},{"location":"portals/huawei/#huawei-fit-ap-settings","title":"Huawei Fit AP Settings","text":"<p>Huawei Fit AP settings are similar to FAT AP settings. Note the following points: </p> <ul> <li>All configurations such as Certificate, SSL Policy, DHCP and NAT will be done on WLAN AC (WLC) instead of directly on the AP</li> <li>In SSID Forwarding mode should be <code>Tunnel</code></li> </ul> <p></p> <ul> <li>Authentication-Free rule will be configured in Configuration &gt; AP Config &gt; Profile &gt; Wireless Service &gt; VAP Profile &gt; profile &gt; Authentication Profile &gt; Authentication-free Rule Profile:</li> </ul> <p></p> <p>Other settings will be the same as given above for FAT AP.</p>"},{"location":"portals/huawei/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/huawei/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Huawei FAT AP:</p> <p></p> <p>Here is the traffic flow in the case of Huawei FIT AP:</p> <p></p>"},{"location":"portals/huawei/#ios-error","title":"iOS Error","text":"<p>When using HTTP captive portal mode iOS devices will produce an error like this:</p> <p>This is because HTTP mode is less secure and is therefore blocked on iOS. The solution is to switch to HTTPS mode.</p>"},{"location":"portals/ligowave/","title":"LigoWave","text":"<p>To set up a portal for LigoWave Infinity first you need to create a template.</p>"},{"location":"portals/ligowave/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Coova Chilli</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/ligowave/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/ligowave/#ligowave-settings","title":"LigoWave Settings","text":"<p>Access LigoWave Infinity device using web portal.</p> <p>Go to Settings &gt; Network configuration and set Network mode to Router.</p> <p>In Settings &gt; Wireless Configuration go to Wireless settings (AP). Edit the settings on the SSID on which you want to enable captive portal. In Security settings set Security type to Hotspot (UAM).</p> <p></p> <p>In UAM settings &gt; RADIUS, enter a NAS ID which can be the IP address of the AP. Enter the IP address and secret of RADIUS server (will be provided by Splash Networks' team).</p> <p></p> <p>In Captive portal tab, Splash page type should be <code>External</code>. In Login URL enter the <code>Guest Portal URL</code> copied earlier. In Portal secret enter the secret created earlier.</p> <p> In White/Black list tab, enter the IP address of Splash Air server in White list section.</p> <p></p> <p>Click the Done button. Then click on the Save changes button to apply the settings.</p>"},{"location":"portals/ligowave/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/ligowave/#traffic-flow","title":"Traffic Flow","text":"<p>For traffic flow refer to the traffic flow section of Coova Chilli here.</p>"},{"location":"portals/mikrotik-with-radius/","title":"Mikrotik with RADIUS","text":"<pre><code>It is recommended to use RouterOS v7 for best results.\n</code></pre> <p>To set up a portal for Mikrotik first you need to create a template.</p>"},{"location":"portals/mikrotik-with-radius/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Mikrotik with RADIUS</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/mikrotik-with-radius/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/mikrotik-with-radius/#mikrotik-settings","title":"Mikrotik Settings","text":"<p>Before setting up Hotspot on Mikrotik it is important to enable access from WAN side, otherwise you would be locked out of the system once Hotspot is enabled.</p> <p>Access your Mikrotik router using Winbox. Go to IP &gt; Firewall and disable the following rules that block access from WAN:</p> <p></p> <p>Go to IP &gt; Addresses and note your router's WAN IP (usually WAN interface is <code>ether1</code>). Connect to your Mikrotik router through WinBox using this IP before proceeding further.</p>"},{"location":"portals/mikrotik-with-radius/#hotspot-setup","title":"Hotspot Setup","text":"<p>Go to IP &gt; Hotspot and click on Hotspot Setup.</p> <p></p> <p>A series of dialog boxes will appear. Select the following options:</p> <ol> <li>In HotSpot Interface select bridge and press Next.</li> <li>In Local address of network keep the default option and press Next.</li> <li>In Address Pool of Network keep the default option and press Next.</li> <li>In Select Certificate select None and press Next.</li> <li>In IP Address of SMTP Server keep the default option and press Next.</li> <li>In DNS Servers keep the default option and press Next.</li> <li>In DNS name type nothing and press Next.</li> <li>In Create local HotSpot user, keep Name <code>admin</code> and password blank and press Next.</li> </ol> <p>The setup is now complete. Go to IP &gt; Hotspot &gt; Server Profiles and select <code>hsprof1</code> profile. In Login tab check <code>HTTP PAP</code> option and uncheck all other options. Click OK to save settings.</p> <p>In IP &gt; Hotspot &gt; User Profiles open the <code>default</code> profile and disable MAC Cookie. Change the number of <code>Shared Users</code> to the maximum number of devices that you want to be connected to the hotspot simultaneously.</p> <p></p> <p>Go to IP &gt; Hotspot &gt; Walled Garden IP List and create a new entry. In Dst. Address add the IP address of your Splash Air server and click OK.</p> <p></p> <p>If using <code>Payment</code> Flow then you need to add walled garden entries for your payment gateway entries to Walled Garden IP List:</p> <p></p> <p>Go to RADIUS and click on New to add a new RADIUS server. In Service select <code>hotspot</code> and enter the Address and Secret of the RADIUS server.</p>"},{"location":"portals/mikrotik-with-radius/#portal-files","title":"Portal Files","text":"<p>Download this file and unzip it. Open the <code>login.html</code> file in a text editor. The Guest Portal URL generated earlier should be pasted in the form action field as shown below:</p> <p></p> <p>Go to Files and in Hotspot select <code>login.html</code> and <code>alogin.html</code> files and remove them.</p> <p></p> <p>Replace them with the files on your computer by dragging and dropping them into the <code>hotspot</code> directory:</p> <p></p>"},{"location":"portals/mikrotik-with-radius/#avoiding-browsing-warning-on-laptops","title":"Avoiding Browsing Warning on Laptops","text":"<p>When using captive portal on laptops and desktops you may receive a browser warning like this about information being submitted insecurely:</p> <p></p> <p>To avoid this you need to import a TLS certificate to your Mikrotik router. You can get one for free using Let's Encrypt. Here is the process for installing it to your router.</p> <p>Combine your certificate and key into one consolidated file and upload that to your router:</p> <p></p> <p>Go to System &gt; Certificates and click on the Import button. Select the file you just uploaded, make sure the <code>Trusted</code> option is checked and click Import.</p> <p></p> <p>The imported certificate will be shown. In our case we are using a wildcard TLS certificate generating using Let's Encrypt.</p> <p></p> <p>Go to IP &gt; Hotspot &gt; Server Profiles and select <code>hsprof1</code> profile. Enter a DNS name for your router (the respective DNS record should also exist and point to any of the interface IPs on Mikrotik). In Login section enable <code>HTTPS</code> and in SSL Certificate select the certificate imported in the previous step.</p> <p></p>"},{"location":"portals/mikrotik-with-radius/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/mikrotik-with-radius/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Mikrotik with RADIUS:</p> <p></p>"},{"location":"portals/mikrotik/","title":"Mikrotik","text":"<pre><code>It is recommended to use RouterOS v7 for best results.\n</code></pre> <p>To set up a portal for Mikrotik first you need to create a template.</p>"},{"location":"portals/mikrotik/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Mikrotik</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/mikrotik/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/mikrotik/#mikrotik-settings","title":"Mikrotik Settings","text":"<p>Before setting up Hotspot on Mikrotik it is important to enable access from WAN side, otherwise you would be locked out of the system once Hotspot is enabled.</p> <p>Access your Mikrotik router using Winbox. Go to IP &gt; Firewall and disable the following rules that block access from WAN:</p> <p></p> <p>Go to IP &gt; Addresses and note your router's WAN IP (usually WAN interface is <code>ether1</code>). Connect to your Mikrotik router through WinBox using this IP before proceeding further.</p>"},{"location":"portals/mikrotik/#hotspot-setup","title":"Hotspot Setup","text":"<p>Go to IP &gt; Hotspot and click on Hotspot Setup.</p> <p></p> <p>A series of dialog boxes will appear. Select the following options:</p> <ol> <li>In HotSpot Interface select bridge and press Next.</li> <li>In Local address of network keep the default option and press Next.</li> <li>In Address Pool of Network keep the default option and press Next.</li> <li>In Select Certificate select None and press Next.</li> <li>In IP Address of SMTP Server keep the default option and press Next.</li> <li>In DNS Servers keep the default option and press Next.</li> <li>In DNS name type nothing and press Next.</li> <li>In Create local HotSpot user, keep Name <code>admin</code> and password blank and press Next.</li> </ol> <p>The setup is now complete. Go to IP &gt; Hotspot &gt; Server Profiles and select <code>hsprof1</code> profile. In Login tab check <code>HTTP PAP</code> option and uncheck all other options. Click OK to save settings.</p> <p></p> <p>In IP &gt; Hotspot &gt; User Profiles open the <code>default</code> profile and disable MAC Cookie. Change the number of <code>Shared Users</code> to the maximum number of devices that you want to be connected to the hotspot simultaneously.</p> <p></p> <p>Go to IP &gt; Hotspot &gt; Walled Garden IP List and create a new entry. In Dst. Address add the IP address of your Splash Air server and click OK.</p> <p></p>"},{"location":"portals/mikrotik/#portal-files","title":"Portal Files","text":"<p>Download this file and unzip it. Open the <code>login.html</code> file in a text editor. The Guest Portal URL generated earlier should be pasted in the form action field as shown below:</p> <p></p> <p>Go to Files and in Hotspot select <code>login.html</code> and <code>alogin.html</code> files and remove them.</p> <p></p> <p>Replace them with the files on your computer by dragging and dropping them into the <code>hotspot</code> directory:</p> <p></p>"},{"location":"portals/mikrotik/#avoiding-browsing-warning-on-laptops","title":"Avoiding Browsing Warning on Laptops","text":"<p>When using captive portal on laptops and desktops you may receive a browser warning like this about information being submitted insecurely:</p> <p></p> <p>To avoid this you need to import a TLS certificate to your Mikrotik router. You can get one for free using Let's Encrypt. Here is the process for installing it to your router.</p> <p>Combine your certificate and key into one consolidated file and upload that to your router:</p> <p></p> <p>Go to System &gt; Certificates and click on the Import button. Select the file you just uploaded, make sure the <code>Trusted</code> option is checked and click Import.</p> <p></p> <p>The imported certificate will be shown. In our case we are using a wildcard TLS certificate generating using Let's Encrypt.</p> <p></p> <p>Go to IP &gt; Hotspot &gt; Server Profiles and select <code>hsprof1</code> profile. Enter a DNS name for your router (the respective DNS record should also exist and point to any of the interface IPs on Mikrotik). In Login section enable <code>HTTPS</code> and in SSL Certificate select the certificate imported in the previous step.</p> <p></p>"},{"location":"portals/mikrotik/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/mikrotik/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Mikrotik:</p> <p></p>"},{"location":"portals/mikrotik/#portal-loops-between-welcome-and-authorization-screen-user-is-not-authorized","title":"Portal Loops Between Welcome and Authorization Screen &amp; User is Not Authorized","text":"<p>This happens when your admin user has a password. Remove the password for the admin user to fix this issue.</p> <p></p>"},{"location":"portals/omada/","title":"TP-Link Omada","text":"<p>To set up a portal for TP-Link Omada first you need to create a template.</p>"},{"location":"portals/omada/#add-a-portal","title":"Add a Portal","text":"<p>On Splash Air go to Controllers &gt; TP-Link Omada and add a new controller. Specify a name for it, and enter the WAN IP or hostname of the Omada controller.</p> <p></p> <p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>TP-Link Omada</code>. Select the controller added in the previous step. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/omada/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/omada/#omada-controller-settings","title":"Omada Controller Settings","text":"<p>Access Omada controller using web interface. Go to Settings &gt; Profiles &gt; RADIUS Profile and create a new profile. Enter the IP address/URL and secret of your RADIUS server (details will be provided by Splash team).</p> <p></p> <p>Next, go to Settings &gt; Authentication &gt; Portal and create a new portal. Specify a name for it, and enable the Portal option. Select the SSID &amp; Network on which portal should be enabled. In Authentication Type select <code>RADIUS Server</code>. In RADIUS Profile select the profile created in the previous step. In Authentication Mode select <code>PAP</code>. In Portal Customization select <code>External Web Portal</code> and paste the Guest Portal URL copied earlier.</p> <p></p> <p>Then go to Settings &gt; Authentication &gt; Portal &gt; Access Control and enable Pre-Authentication Access. Add a new entry and put the IP address of the Splash Air server in it.</p> <p></p> <p>Click Apply to save the settings.</p>"},{"location":"portals/omada/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/omada/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of TP-Link Omada Controller:</p> <p></p>"},{"location":"portals/openmesh/","title":"Open Mesh","text":"<p>To set up a portal for Open Mesh first you need to create a template.</p>"},{"location":"portals/openmesh/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Coova Chilli</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/openmesh/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/openmesh/#open-mesh-settings","title":"Open Mesh Settings","text":"<p>Access CloudTrax web portal and select the SSID on which captive portal needs to be enabled in Configure &gt; SSID #.</p> <p>In SSID name set an SSID. Turn on the Enable option. Turn off Authentication. Under Captive Portal turn on Splash page.</p> <p></p> <p>In Splash page type select <code>Hosted remotely</code>. In Splash page URL enter the <code>Guest Portal URL</code> copied earlier. In Splash page secret enter the secret created earlier. In Splash page authentication type select <code>RADIUS</code>. In Server address 1 and Server secret enter the IP address and secret of your RADIUS server (will be provided by Splash Networks' team).</p> <p></p> <p>Keep the Use MAC addr for password option off. In Client force timeout select a session timeout value. Keep the remaining settings at their default values: Block LAN access and Client isolation should be on.</p>"},{"location":"portals/openmesh/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/openmesh/#traffic-flow","title":"Traffic Flow","text":"<p>For traffic flow refer to the traffic flow section of Coova Chilli here.</p>"},{"location":"portals/openmesh/#pre-auth","title":"Pre Auth","text":"<p>Open Mesh devices perform a pre-auth process when a user comes online. It sends a RADIUS Access-Request with that user's MAC address as User-Name and empty User-Password (can be changed to MAC address by using the Use MAC addr for password toggle in Cloudtrax settings). If RADIUS accepts that request the user won't see the captive portal at all and would have internet directly. If you are using the RADIUS settings given here then add the following line at the top of <code>/etc/freeradius/3.0/users</code> file:</p> <pre><code>DEFAULT User-Password == \"\", Auth-Type := Reject\n</code></pre> <p>This will ensure that the portal always pops up for the client.</p>"},{"location":"portals/openmesh/#ssh-access","title":"SSH Access","text":"<p>To access Open Mesh AP via SSH go to Configure &gt; Advanced and set a password in Root password field. Then AP can be accessed using username <code>root</code> and your configured password.</p> <p>Open Mesh devices use a daemon called <code>udsplash</code> for captive portal. Here are some helpful commands:</p> <p>Check online users</p> <pre><code>udsplash -l\n</code></pre> <p>Logout connected user</p> <pre><code>udsplash -n &lt;ssid&gt; -A &lt;MAC address&gt;\n</code></pre> <p>For example: <code>udsplash -n ssid4 -A 5A:0B:F7:02:A3:6E</code></p>"},{"location":"portals/opennds/","title":"OpenNDS","text":"<p>To set up a portal for OpenNDS first you need to create a template.</p>"},{"location":"portals/opennds/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>OpenNDS</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/opennds/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/opennds/#opennds-settings","title":"OpenNDS Settings","text":"<p>OpenNDS is an open-source captive portal package which is used in many Linux based routers. This guide is written for OpenWRT. However, OpenNDS can be made to work on other Linux based devices such as a Raspberry Pi.</p> <p>Access OpenWRT router/AP using LuCI web interface. By default, OpenWRT firewall does not allow web or SSH access on WAN IP. As a captive portal blocks all traffic on LAN until user is authenticated so when we initially enable captive portal on OpenWRT we would lose management access to the router. To manage OpenWRT we should therefore open access from WAN side. </p> <p>Go to Network &gt; Firewall &gt; Traffic Rules. Add a new rule with these properties:</p> <pre><code>Protocol: TCP\nSource zone: wan\nDestination zone: Device (input)\nDestination port: 80\n</code></pre> <p>Similarly, add another rule for <code>Destination port: 22</code>. Click on Save and apply. Once these rules are added you would be able to access OpenWRT via web and SSH from WAN side.</p> <p>Access your OpenWRT device over SSH using its WAN IP. Enter these commands:</p> <pre><code>opkg update\nopkg install opennds nano\nopkg install php8 php8-cli php8-mod-openssl\n</code></pre> <p>Recall the <code>Guest Portal URL</code> that was created earlier. In our example its value was: https://splashair.splashnetworks.co/on/site1</p> <p>It consists of 2 parts:</p> <p>Hostname: <code>splashair.splashnetworks.co</code></p> <p>Path: <code>/on/site1</code></p> <p>You will need to enter these parameters in the OpenNDS config file.</p> <p>Open OpenNDS config file:</p> <pre><code>nano /etc/config/opennds\n</code></pre> <p>Add the following parameters at the end:</p> <p>option fasport <code>443</code>: it tells OpenNDS that the captive portal is using HTTPS port 443</p> <p>option fasremotefqdn <code>&lt;hostname&gt;</code>: the hostname in <code>Guest Portal URL</code></p> <p>option faspath <code>&lt;path&gt;</code>: the path in <code>Guest Portal URL</code></p> <p>option fasremoteip <code>&lt;IP address&gt;</code>: the IP address of Splash Air server</p> <p>option faskey <code>&lt;secret&gt;</code>: the secret created with the portal will be entered here</p> <p>Save and exit.</p> <p>To apply the changes restart the service:</p> <pre><code>service opennds restart\n</code></pre> <p>To check current settings and status use this command:</p> <pre><code>ndsctl status\n</code></pre> <p>Note: on some devices with OpenNDS it is observed that an option faskey <code>&lt;secret&gt;</code> is appended automatically at the end of the config file by the device. In that case just modify that value and don't create a new <code>faskey</code> setting.</p>"},{"location":"portals/opennds/#helpful-commands","title":"Helpful commands","text":"<p>Enable/disable service</p> <pre><code>service opennds enable\nservice opennds disable\n</code></pre> <p>Logout connected user</p> <pre><code>ndsctl deauth &lt;IP | MAC address&gt;\n</code></pre> <p>View logs</p> <pre><code>logread -f\n</code></pre>"},{"location":"portals/opennds/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/opennds/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of OpenNDS:</p> <p></p>"},{"location":"portals/ruckus-smartzone/","title":"Ruckus SmartZone","text":"<p>To set up a portal for Ruckus SmartZone (SZ) or virtual SmartZone (vSZ) first you need to create a template.</p>"},{"location":"portals/ruckus-smartzone/#ruckus-sz-northbound-portal-interface","title":"Ruckus SZ Northbound Portal Interface","text":"<p>Access SmartZone using web interface. Go to Administration &gt; WISPr Northbound Interface. Enable Northbound Portal Interface Support and enter a username and password.</p> <p></p>"},{"location":"portals/ruckus-smartzone/#add-a-portal","title":"Add a Portal","text":"<p>On Splash Air go to Controllers &gt; Ruckus SmartZone and add a new controller. Specify a name for it, and enter the username and password created in the previous step. Also enter the WAN IP or hostname of Ruckus SZ.</p> <p></p> <p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Ruckus SmartZone</code>. Select the controller added in the previous step. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/ruckus-smartzone/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/ruckus-smartzone/#smartzone-settings","title":"SmartZone Settings","text":"<p>Access SmartZone using web interface. Go to Network &gt; Wireless LAN and select your zone. Create a new WLAN (or edit an existing one). Enter a name and SSID. In Authentication Options select Hotspot (WISPr). In Encryption Options select None.</p> <p></p> <p>In Hotspot Portal create a new profile in Hotspot (WISPr) Portal section. In Portal Name enter a name for it. In Login URL select External. In Redirect unauthenticated user Primary enter the Guest Portal URL copied earlier.</p> <p></p> <p>In Walled Garden add the IP address of the Splash Air server:</p> <p></p> <p>Click Apply to save the settings.</p> <p>In Hotspot Portal &gt; Authentication Server select On and select the option Always Accept.</p>"},{"location":"portals/ruckus-smartzone/#mac-encryption","title":"MAC Encryption","text":"<p>Access SmartZone via SSH and enter the following command: </p><pre><code>ruckus(config)# no encrypt-mac-ip\n</code></pre> This will ensure that the MAC and IP address of customer are recorded in plain-text. Otherwise, the default behavior is that they are encrypted.<p></p>"},{"location":"portals/ruckus-smartzone/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/ruckus-smartzone/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ruckus SmartZone:</p> <p></p>"},{"location":"portals/ruckus-unleashed/","title":"Ruckus Unleashed","text":"<p>To set up a portal for Ruckus Unleashed first you need to create a template.</p>"},{"location":"portals/ruckus-unleashed/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Ruckus Unleashed</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/ruckus-unleashed/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/ruckus-unleashed/#ruckus-unleashed-settings","title":"Ruckus Unleashed Settings","text":"<p>Access Ruckus Unleashed using web interface. Go to Services &gt; Authentication Servers and add a new server. Enter a name for it, and in Type select <code>RADIUS</code>. Auth Method will be <code>PAP</code>. Enter the Server Address and Secret of your RADIUS server (these details will be provided by Splash team).</p> <p></p> <p>Then go to Services &gt; Wireless Hotspot and add a new Hotspot. Enter a name for it, and in Login Page enter the <code>Guest Portal URL</code> created earlier. In the options for After user is authenticated select <code>redirect to the following URL</code> and enter your preferred URL.</p> <p></p> <p>On the next page in Authentication Servers section select the RADIUS server created previously. Keep the other options at their default values. Then click Next to go to the Walled Garden settings. Click on Add and enter the IP address of your portal server. If using <code>Payment</code> Flow you need to add walled garden entries for your payment gateway such as Stripe.</p> <p></p> <p>On the next page related to Policy you do not need to create any rule. Click on the Add button to complete Hotspot configuration.</p> <p>Finally, go to Wi-Fi &gt; Wi-Fi Networks List and either create a new guest network (or modify an existing one). In Usage Type select <code>Hotspot Service</code>. In Hotspot Services select the service that you created.</p> <p></p> <p>Click Next to go to Advanced Options. You do not need to change anything here. Click Add to complete the setup.</p>"},{"location":"portals/ruckus-unleashed/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/ruckus-unleashed/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ruckus Unleashed:</p> <p></p>"},{"location":"portals/ruckusone/","title":"Ruckus One","text":"<p>To set up a portal for Ruckus One first you need to create a template.</p>"},{"location":"portals/ruckusone/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Ruckus One</code>. In Secret enter the integration key obtained in Ruckus One (explained below in Ruckus One Settings section).Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/ruckusone/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/ruckusone/#ruckus-one-settings","title":"Ruckus One Settings","text":"<p>Access Ruckus One using web interface. Go to Wi-Fi &gt; Wi-Fi Networks List and add a new network (or modify an existing network). Enter a name and in Network Type select <code>Captive Portal</code>.</p> <p></p> <p>Click Next. In Portal Type select <code>3rd Party Captive Portal (WISPr)</code> and click Next. In Portal Provider select <code>Custom Provider</code> and enter a name for it. In Captive Portal URL enter the <code>Guest Portal URL</code> created earlier. Copy the Integration Key which is given below and enter its value into the Secret field in Portal configuration on Splash Air.</p> <p></p> <p>Uncheck the following options:</p> <p>Enable MAC auth bypass</p> <p>Enable the encryption for users\u2019 MAC and IP addresses</p> <p>In Authentication Service click on Add Server. Enter a name for it, and enter the IP address and Shared Secret of your Splash Air RADIUS server (will be provided by Splash Networks' team).</p> <p>Next select your venue and click on the Activated toggle button to activate it. In the final screen review the summary and click on the Add button.</p>"},{"location":"portals/ruckusone/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/ruckusone/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ruckus One:</p> <p></p>"},{"location":"portals/ruijie/","title":"Ruijie","text":"<p>To set up a portal for Ruijie first you need to create a template.</p>"},{"location":"portals/ruijie/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portals tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Ruijie</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/ruijie/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nExpiry (days): the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds): the time in seconds for which a user is authorized on the network\nDuration (seconds) before email verification: when using \"Link\" type Flow it is the time a user will be authorized on the network before email verification\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/ruijie/#ruijie-settings","title":"Ruijie Settings","text":"<p>Access Ruijie cloud using web interface. Go to Auth &amp; Accounts &gt; Authentication &gt; Captive Portal and add a new captive portal. Enter a name and in Policy Mode select <code>External</code>. Select the SSID on which portal needs to be applied. In Portal Server URL enter the <code>Guest Portal URL</code> copied earlier. In Portal IP enter the IP address of Splash Air server. Click OK to save settings.</p> <p></p>"},{"location":"portals/ruijie/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/ruijie/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ruijie:</p> <p></p>"},{"location":"portals/ruijie/#http-access","title":"HTTP access","text":"<p>For Ruijie TCP port 80 and 443 should both be open as captive portal authorization process involves both HTTP and HTTPS traffic. Ensure that Ruijie AP can communicate with Splash Air server on HTTP over port 80.</p>"},{"location":"portals/teltonika/","title":"Teltonika","text":"<p>To set up a portal for Teltonika first you need to create a template.</p>"},{"location":"portals/teltonika/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal and specify the business and venue. In Hardware select <code>Coova Chilli</code>. Enter a secret which will be used to secure communication between the router/AP and Splash Air server. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the template and click on the Create button.</p>"},{"location":"portals/teltonika/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nRedirect URL: the URL a user is redirected to after successful portal authorization\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p>"},{"location":"portals/teltonika/#teltonika-settings","title":"Teltonika Settings","text":"<p>Access Teltonika device using web portal.</p> <p>Go to System &gt; Package manager and install Hotspot package.</p> <p></p> <p>Then go to Service &gt; Hotspot &gt; General and in Interface select the interface on which you want to enable hotspot.</p> <p></p> <p>Click the Add button to start hotspot configuration on the interface. In General tab configure these settings:</p> <ul> <li>Configuration profile: Default</li> <li>Authentication mode: RADIUS</li> <li>Landing page: External</li> <li>Password encoding: on</li> <li>Landing page address: <code>Guest Portal URL</code> created earlier</li> <li>UAM secret: the secret created earlier</li> <li>Success page: Custom</li> <li>Custom URL: the URL a user is redirected to after successful portal authorization</li> </ul> <p>Next go to RADIUS tab and enter the IP address and secret of RADIUS server (will be provided by Splash Networks' team). Keep the other settings at their defaults and click Save and Apply.</p> <p>Click on the Enabled option to turn on the Hotspot feature and click Save &amp; Apply.</p> <p></p>"},{"location":"portals/teltonika/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/teltonika/#traffic-flow","title":"Traffic Flow","text":"<p>For traffic flow refer to the traffic flow section of Coova Chilli here.</p>"},{"location":"portals/unifi/","title":"Ubiquiti Unifi","text":"<p>To set up a portal for Unifi first you need to create a template. Then you have to add the Unifi controller which will be using that portal. A single template can be applied to multiple sites.</p>"},{"location":"portals/unifi/#add-a-unifi-controller","title":"Add a Unifi Controller","text":"<p>To add a Unifi Controller you will click on the New unifi controller button in the Unifi Controllers tab. An interactive wizard will launch. You need to enter the name, URL and username password for the Unifi Controller. It needs to be a local user without 2FA. The controller should be reachable directly over the internet using the provided hostname, not via ui.com portal.</p> <p></p> <p>In the 2nd step the connection with the Unifi controller will be tested. If the connection is successful, you will get an option to assign sites on the Unifi controller to corresponding venues and templates on Splash Air. You can use the <code>+</code> button at the bottom to add multiple sites.</p> <p></p> <p>The 3rd and final step applies the settings for captive portal to the respective site on the Unifi controller. Click on the Create button to complete the process.</p> <p></p> <p>Completing this process sets up the captive portal for the selected site(s) on Splash Air.</p> <p>The controller will start showing on the Unifi Controllers page:</p> <p></p> <p>You should check the site in the Unifi Controller to double-check the captive portal settings. In Hotspot &gt; Authentication <code>External Portal Server</code> should be selected. </p> <p></p> <p>By clicking on Edit you can view the IP address: it should show the IP address of the Splash Air server.</p> <p></p> <p>In the Settings tab the Landing Page Settings should be like this:</p> <p></p> <pre><code>Show Landing Page: checked\nHTTPs Redirection Support: unchecked\nEncrypted URL: unchecked\nSecure Portal: checked\nDomain: checked\n\nDomain: &lt;Splash Air Domain&gt;\n</code></pre> <p>Finally, go to Settings &gt; WiFi and select your guest Wi-Fi network. Enable <code>Captive Portal</code> option in Hotspot section.</p> <p></p> <p>If using <code>Payment</code> Flow you need to add walled garden entries for your payment gateway such as Stripe in Pre-Authorization Allowances section.</p> <p></p>"},{"location":"portals/unifi/#portals","title":"Portals","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p></p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Redirect URL: the URL a user is redirected to after successful portal authorization\nBusiness Name: name of the venue which will be displayed on top of the portal\nDuration: the time in minutes for which a user is authorized on the network\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/unifi/#troubleshooting","title":"Troubleshooting","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"portals/unifi/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ubiquiti Unifi:</p> <p></p>"},{"location":"portals/unifi/#client-isolation","title":"Client Isolation","text":"<p>The client isolation setting on Unifi controller has been known to lead to this error when trying to access the captive portal:</p> <pre><code>Hotspot login cannot open the page because the network connection was lost\n</code></pre> <p></p> <p>To prevent it disable client device isolation in WiFi settings.</p> <p></p>"}]}