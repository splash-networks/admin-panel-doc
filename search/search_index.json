{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Documentation Home","text":"<p>This is a basic guide for setting up and performing common tasks on Splash Air.</p>"},{"location":"#introduction","title":"Introduction","text":"<p>The Splash Air application has 2 main purposes:</p> <ol> <li>Creating external captive portals</li> <li>Providing a user-friendly interface for viewing and exporting user data</li> </ol>"},{"location":"#terminology","title":"Terminology","text":"<p>It is important to familiarize yourself with the following terminology to understand the sequence of steps required to set up the system.</p>"},{"location":"#business","title":"Business:","text":"The organization in which portal is being deployed, such as Starbucks or Harvard University. A business can have several venues."},{"location":"#venue","title":"Venue:","text":"The location or site where portal is being deployed, such as Starbucks Dubai Mall or Harvard Law School."},{"location":"#template","title":"Template:","text":"The template refers to the design of a portal splash page typically including logo, background, fonts, colors, form fields, and terms and conditions. It also specifies the portal flow i.e. the process a user has to complete to gain network access, such as verifying their contact information via a One Time Password (OTP). It is hardware-agnostic."},{"location":"#portal","title":"Portal:","text":"A portal is defined by attaching a template to a particular venue and hardware type such as Aruba or Unifi. It can have several unique parameters and settings such as URL, session timeout, Redirect URL etc. for each particular hardware type."},{"location":"#configuration-steps","title":"Configuration Steps","text":"<p>The typical flow of operations when working on a new deployment of Splash Air would be like this:</p> <p></p>"},{"location":"defining-templates/","title":"Defining Templates","text":""},{"location":"defining-templates/#setting-up-templates","title":"Setting up Templates","text":"<p>In the Templates tab you can add a new template using the New template button or through the Import button if you have a previous export that you'd like to import.</p> <p>When creating a new template you can modify the logo and the text fields according to your preference. The field selector section allows you to enable/disable various fields like Email and Phone number based on your requirements. You can change the font, button color, and placeholders for fields. Also, you can add a Background Image. The changes will be displayed in real time on the panel on the right side.</p> <p></p>"},{"location":"defining-templates/#flow","title":"Flow","text":"<p>There are 3 types of user authorization flows that are currently supported:</p> <ul> <li>Simple</li> <li>OTP</li> <li>Link</li> </ul>"},{"location":"defining-templates/#simple-flow","title":"Simple Flow","text":"<p>In Simple Flow the user enters their email and mobile number data but does not have to go through OTP based verification.</p> <p>Here is an example of Simple flow:</p>"},{"location":"defining-templates/#otp-flow","title":"OTP Flow","text":"<p>In OTP Flow the user has to verify their data using an OTP (One Time Password). You can setup either email verification or mobile number verification.</p> <p>Here is an example of OTP flow:</p>"},{"location":"defining-templates/#link-flow","title":"Link Flow","text":"<p>In Link Flow the user has to verify their email address by clicking on a verification link. The user is given internet access briefly, typically for 5 min, so they can access their email for completing verification. If they don't verify their email address during that time, they will be unauthorized from the network. If they do verify their email address, their session will be extended.</p> <p>Here is an example of Link flow:</p>"},{"location":"defining-templates/#email-based-otp-verification-caveat","title":"Email Based OTP Verification Caveat","text":"<p>Our recommended flow for email verification is Link flow.</p> <p>Implementing email based OTP verification is not recommended. A user in captive state does not have complete internet access, so they will not be able to check their email on the same device. Either they would need another device to check their email, or they would need to have cellular internet on the same device to receive email via that. Additionally, on iOS devices the Captive Network Assistant (CNA) launches a browser that does not allow switching to another window. If you switch to a different window for checking email the browser will close.</p>"},{"location":"defining-templates/#preview-template","title":"Preview Template","text":"<p>You can click on the preview changes button on the top right to view a full screen preview for mobile, tablet and desktop in portrait and landscape orientation.</p> <p></p> <p>In the full screen preview you can use the buttons on the top to toggle between mobile, tablet and desktop view and switch orientation between portrait and landscape. This lets you visualize the captive portal as users will see it.</p> <p></p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#login","title":"Login","text":"<p>This is the login screen. You will login using your provided credentials.</p>"},{"location":"getting-started/#dashboard","title":"Dashboard","text":"<p>After successful login you will see a dashboard like this showing you some quick stats about your sites.</p> <p></p>"},{"location":"getting-started/#adding-business-and-venues","title":"Adding Business and Venues","text":"<p>In the Businesses tab you can add a new business by clicking on the New business button. After providing the business details its entry will be added:</p> <p></p> <p>Each business can have multiple venues. You can go to the Venues tab to add venues using the New venue button:</p> <p></p>"},{"location":"getting-started/#periodic-reports","title":"Periodic Reports","text":"<p>Under venue settings you have the option of enabling periodic reports. The reporting frequency can be daily/weekly/monthly. It will contain the data of customers and visits to that venue for the selected duration and will be emailed to the provided email addresses.</p> <p></p>"},{"location":"customer-data/","title":"Index","text":"<p>There are 2 ways of accessing customer data:</p> <ol> <li>Web</li> <li>API</li> </ol>"},{"location":"customer-data/api/","title":"Through API","text":""},{"location":"customer-data/api/#api-key-creation","title":"API Key Creation","text":"<p>To access customer data via API the first step is to create an API Key.</p> <p>Go to Admin -&gt; Generate API Key and press the Generate button.</p> <p></p> <p>Copy the generated API Key as it will only be displayed once.</p> <p>You can use the same page to delete an existing key and create a new one if needed.</p> <p>This API key will need to set as the value of the <code>X-API-Key</code> header when making API requests.</p> <p>The URL for API requests will be:</p> <pre><code>https://&lt;hostname&gt;/api\n</code></pre> <p>This will be followed by the specific endpoint that you're querying.</p>"},{"location":"customer-data/api/#customers","title":"Customers","text":"<p>Customer data can be retrieved using the customers API.</p> <pre><code>Request Type: GET\nAPI Endpoint: /customers\n</code></pre> <p></p>"},{"location":"customer-data/api/#customer-visits","title":"Customer Visits","text":"<p>Customer visit data can be retrieved using the customer-visits API.</p> <pre><code>Request Type: GET\nAPI Endpoint: /customer-visits\n</code></pre> <p></p>"},{"location":"customer-data/web/","title":"Through Web","text":""},{"location":"customer-data/web/#customers","title":"Customers","text":"<p>The data entered by the customers appears in the Customers tab.</p> <p></p>"},{"location":"customer-data/web/#customer-visits","title":"Customer Visits","text":"<p>The data of customer visits to a particular venue can be seen in Customer Visits tab.</p> <p></p>"},{"location":"portals/","title":"Creating Portals","text":"<p>This section contains configuration guides for creating portals and integrating them with various types of hardware.</p>"},{"location":"portals/aruba-instant-on/","title":"Aruba/HPE Instant On","text":"<p>To set up a portal for Aruba/HPE Instant On first you need to create a template.</p>"},{"location":"portals/aruba-instant-on/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Aruba Instant On</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/aruba-instant-on/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nSession Timeout: the time in seconds for which a user is authorized on the network\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/aruba-instant-on/#instant-on-portal-settings","title":"Instant On Portal Settings","text":"<p>Login to your account on the HPE Instant On cloud and select the site on which you want to apply guest portal. Create a new Network of type <code>Guest</code>. In Network Options enable <code>Guest Portal</code>.</p> <p></p> <p>In Networks -&gt; Guest Portal select Type <code>External</code>. In Portal URL select the Guest Portal URL that you copied earlier.</p> <p></p> <p>In Primary RADIUS add the details of your RADIUS server, such as IP address and shared secret.</p>"},{"location":"portals/mikrotik-with-radius/","title":"Mikrotik with RADIUS","text":"<pre><code>It is recommended to use RouterOS v7 for best results.\n</code></pre> <p>To set up a portal for Mikrotik first you need to create a template.</p>"},{"location":"portals/mikrotik-with-radius/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Mikrotik with RADIUS</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/mikrotik-with-radius/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after succesful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\nDuration (seconds) after email verification: when using \"Link\" type Flow it is the \"Session-Timeout\" a user will receive via RADIUS after successful email verification \n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/mikrotik-with-radius/#mikrotik-settings","title":"Mikrotik Settings","text":"<p>Before setting up Hotspot on Mikrotik it is important to enable access from WAN side, otherwise you would be locked out of the system once Hotspot is enabled.</p> <p>Access your Mikrotik router using Winbox. Go to IP -&gt; Firewall and disable the following rules that block access from WAN:</p> <p></p> <p>Go to IP -&gt; Addresses and note your router's WAN IP (usually WAN interface is <code>ether1</code>). Connect to your Mikrotik router through WinBox using this IP before proceeding further.</p>"},{"location":"portals/mikrotik-with-radius/#hotspot-setup","title":"Hotspot Setup","text":"<p>Go to IP -&gt; Hotspot and click on Hotspot Setup.</p> <p></p> <p>A series of dialog boxes will appear. Select the following options:</p> <ol> <li>In HotSpot Interface select bridge and press Next.</li> <li>In Local address of network keep the default option and press Next.</li> <li>In Address Pool of Network keep the default option and press Next.</li> <li>In Select Certificate select None and press Next.</li> <li>In IP Address of SMTP Server keep the default option and press Next.</li> <li>In DNS Servers keep the default option and press Next.</li> <li>In DNS name type nothing and press Next.</li> <li>In Create local HotSpot user, keep Name <code>admin</code> and password blank and press Next.</li> </ol> <p>The setup is now complete. Go to IP -&gt; Hotspot -&gt; Server Profiles and select <code>hsprof1</code> profile. In Login tab check <code>HTTP PAP</code> option and uncheck all other options. Click OK to save settings.</p> <p>In IP -&gt; Hotspot -&gt; User Profiles open the <code>default</code> profile and disable MAC Cookie. Change the number of <code>Shared Users</code> to the maximum number of devices that you want to be connected to the hotspot simultaneously.</p> <p></p> <p>Go to IP -&gt; Hotspot -&gt; Walled Garden IP List and create a new entry. In Dst. Address add the IP address of your Splash Air server and click OK.</p> <p></p> <p>Go to RADIUS and click on New to add a new RADIUS server. In Service select <code>hotspot</code> and enter the Address and Secret of the RADIUS server.</p>"},{"location":"portals/mikrotik-with-radius/#portal-files","title":"Portal Files","text":"<p>Download this file and unzip it. Open the <code>login.html</code> file in a text editor. The Guest Portal URL generated earlier should be pasted in the form action field as shown below:</p> <p></p> <p>Go to Files and in Hotspot select <code>login.html</code> and <code>alogin.html</code> files and remove them.</p> <p></p> <p>Replace them with the files on your computer by dragging and dropping them into the <code>hotspot</code> directory:</p> <p></p>"},{"location":"portals/mikrotik-with-radius/#avoiding-browsing-warning-on-laptops","title":"Avoiding Browsing Warning on Laptops","text":"<p>When using captive portal on laptops and desktops you may receive a browser warning like this about information being submitted insecurely:</p> <p></p> <p>To avoid this you need to import a TLS certificate to your Mikrotik router. You can get one for free using Let's Encrypt. Here is the process for installing it to your router.</p> <p>Combine your certificate and key into one consolidated file and upload that to your router:</p> <p></p> <p>Go to System -&gt; Certificates and click on the Import button. Select the file you just uploaded, make sure the <code>Trusted</code> option is checked and click Import.</p> <p></p> <p>The imported certificate will be shown. In our case we are using a wildcard TLS certificate generating using Let's Encrypt.</p> <p></p> <p>Go to IP -&gt; Hotspot -&gt; Server Profiles and select <code>hsprof1</code> profile. Enter a DNS name for your router (the respective DNS record should also exist and point to any of the interface IPs on Mikrotik). In Login section enable <code>HTTPS</code> and in SSL Certificate select the certificate imported in the previous step.</p> <p></p>"},{"location":"portals/mikrotik/","title":"Mikrotik","text":"<pre><code>It is recommended to use RouterOS v7 for best results.\n</code></pre> <p>To set up a portal for Mikrotik first you need to create a template.</p>"},{"location":"portals/mikrotik/#add-a-portal","title":"Add a Portal","text":"<p>To create a portal go to the Portal tab and click on the New portal button. Enter a name for the portal, and in Hardware select <code>Mikrotik</code>. Then, enter a Site ID based on which the path of the portal URL will be defined.</p> <p></p> <p>The <code>Guest Portal URL</code> will be created based on the URL of the Splash Air application followed by the path given by Site ID. Note this URL as it will be required later.</p> <p>Select the venue and template and click on the Create button.</p>"},{"location":"portals/mikrotik/#portal-settings","title":"Portal Settings","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Business Name: name of the venue which will be displayed on top of the portal\nRedirect URL: the URL a user is redirected to after succesful portal authorization\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"portals/mikrotik/#mikrotik-settings","title":"Mikrotik Settings","text":"<p>Before setting up Hotspot on Mikrotik it is important to enable access from WAN side, otherwise you would be locked out of the system once Hotspot is enabled.</p> <p>Access your Mikrotik router using Winbox. Go to IP -&gt; Firewall and disable the following rules that block access from WAN:</p> <p></p> <p>Go to IP -&gt; Addresses and note your router's WAN IP (usually WAN interface is <code>ether1</code>). Connect to your Mikrotik router through WinBox using this IP before proceeding further.</p>"},{"location":"portals/mikrotik/#hotspot-setup","title":"Hotspot Setup","text":"<p>Go to IP -&gt; Hotspot and click on Hotspot Setup.</p> <p></p> <p>A series of dialog boxes will appear. Select the following options:</p> <ol> <li>In HotSpot Interface select bridge and press Next.</li> <li>In Local address of network keep the default option and press Next.</li> <li>In Address Pool of Network keep the default option and press Next.</li> <li>In Select Certificate select None and press Next.</li> <li>In IP Address of SMTP Server keep the default option and press Next.</li> <li>In DNS Servers keep the default option and press Next.</li> <li>In DNS name type nothing and press Next.</li> <li>In Create local HotSpot user, keep Name <code>admin</code> and password blank and press Next.</li> </ol> <p>The setup is now complete. Go to IP -&gt; Hotspot -&gt; Server Profiles and select <code>hsprof1</code> profile. In Login tab check <code>HTTP PAP</code> option and uncheck all other options. Click OK to save settings.</p> <p></p> <p>In IP -&gt; Hotspot -&gt; User Profiles open the <code>default</code> profile and disable MAC Cookie. Change the number of <code>Shared Users</code> to the maximum number of devices that you want to be connected to the hotspot simultaneously.</p> <p></p> <p>Go to IP -&gt; Hotspot -&gt; Walled Garden IP List and create a new entry. In Dst. Address add the IP address of your Splash Air server and click OK.</p> <p></p>"},{"location":"portals/mikrotik/#portal-files","title":"Portal Files","text":"<p>Download this file and unzip it. Open the <code>login.html</code> file in a text editor. The Guest Portal URL generated earlier should be pasted in the form action field as shown below:</p> <p></p> <p>Go to Files and in Hotspot select <code>login.html</code> and <code>alogin.html</code> files and remove them.</p> <p></p> <p>Replace them with the files on your computer by dragging and dropping them into the <code>hotspot</code> directory:</p> <p></p>"},{"location":"portals/mikrotik/#avoiding-browsing-warning-on-laptops","title":"Avoiding Browsing Warning on Laptops","text":"<p>When using captive portal on laptops and desktops you may receive a browser warning like this about information being submitted insecurely:</p> <p></p> <p>To avoid this you need to import a TLS certificate to your Mikrotik router. You can get one for free using Let's Encrypt. Here is the process for installing it to your router.</p> <p>Combine your certificate and key into one consolidated file and upload that to your router:</p> <p></p> <p>Go to System -&gt; Certificates and click on the Import button. Select the file you just uploaded, make sure the <code>Trusted</code> option is checked and click Import.</p> <p></p> <p>The imported certificate will be shown. In our case we are using a wildcard TLS certificate generating using Let's Encrypt.</p> <p></p> <p>Go to IP -&gt; Hotspot -&gt; Server Profiles and select <code>hsprof1</code> profile. Enter a DNS name for your router (the respective DNS record should also exist and point to any of the interface IPs on Mikrotik). In Login section enable <code>HTTPS</code> and in SSL Certificate select the certificate imported in the previous step.</p> <p></p>"},{"location":"portals/unifi/","title":"Ubiquiti Unifi","text":"<p>To set up a portal for Unifi first you need to create a template. Then you have to add the Unifi controller which will be using that portal. A single template can be applied to multiple sites.</p>"},{"location":"portals/unifi/#add-a-unifi-controller","title":"Add a Unifi Controller","text":"<p>To add a Unifi Controller you will click on the New unifi controller button in the Unifi Controllers tab. An interactive wizard will launch. You need to enter the name, URL and username password for the Unifi Controller. It needs to be a local user without 2FA. The controller should be reachable directly over the internet using the provided hostname, not via ui.com portal.</p> <p></p> <p>In the 2nd step the connection with the Unifi controller will be tested. If the connection is successful, you will get an option to assign sites on the Unifi controller to corresponding venues and templates on Splash Air. You can use the <code>+</code> button at the bottom to add multiple sites.</p> <p></p> <p>The 3rd and final step applies the settings for captive portal to the respective site on the Unifi controller. Click on the Create button to complete the process.</p> <p></p> <p>Completing this process sets up the captive portal for the selected site(s) on Splash Air.</p> <p>The controller will start showing on the Unifi Controllers page:</p> <p></p> <p>You should check the site in the Unifi Controller to double-check the captive portal settings. In Hotspot -&gt; Authentication <code>External Portal Server</code> should be selected. </p> <p></p> <p>By clicking on Edit you can view the IP address: it should show the IP address of the Splash Air server.</p> <p></p> <p>In the Settings tab the Landing Page Settings should be like this:</p> <p></p> <pre><code>Show Landing Page: checked\nHTTPs Redirection Support: unchecked\nEncrypted URL: unchecked\nSecure Portal: checked\nDomain: checked\n\nDomain: &lt;Splash Air Domain&gt;\n</code></pre>"},{"location":"portals/unifi/#portals","title":"Portals","text":"<p>You can go to Portals to view the settings for the portal(s) just added.</p> <p></p> <p>Clicking on a portal takes you to the details for that portal. It lets you specify additional settings:</p> <pre><code>Redirect URL: the URL a user is redirected to after succesful portal authorization\nBusiness Name: name of the venue which will be displayed on top of the portal\nDuration: the time in minutes for which a user is authorized on the network\nExpiry: the time in days after which a repeat user will have to enter their data again on the portal\n</code></pre> <p>You can click on the Edit button against each entry to modify it if needed.</p> <p></p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>This section contains troubleshooting guides for various types of hardware.</p>"},{"location":"troubleshooting/aruba-instant-on/","title":"Aruba/HPE Instant On","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"troubleshooting/aruba-instant-on/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of HPE/Aruba:</p> <p></p>"},{"location":"troubleshooting/mikrotik-with-radius/","title":"Mikrotik with RADIUS","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"troubleshooting/mikrotik-with-radius/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Mikrotik with RADIUS:</p> <p></p>"},{"location":"troubleshooting/mikrotik/","title":"Mikrotik","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"troubleshooting/mikrotik/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Mikrotik:</p> <p></p>"},{"location":"troubleshooting/mikrotik/#portal-loops-between-welcome-and-authorization-screen-user-is-not-authorized","title":"Portal Loops Between Welcome and Authorization Screen &amp; User is Not Authorized","text":"<p>This happens when your admin user has a password. Remove the password for the admin user to fix this issue.</p> <p></p>"},{"location":"troubleshooting/unifi/","title":"Ubiquiti Unifi","text":"<p>To troubleshoot problems it is important to understand the components involved in the captive portal user authorization process and the interactions between them.</p>"},{"location":"troubleshooting/unifi/#traffic-flow","title":"Traffic Flow","text":"<p>Here is the traffic flow in the case of Ubiquiti Unifi:</p> <p></p>"},{"location":"troubleshooting/unifi/#client-isolation","title":"Client Isolation","text":"<p>The client isolation setting on Unifi controller has been known to lead to this error when trying to access the captive portal:</p> <pre><code>Hotspot login cannot open the page because the network connection was lost\n</code></pre> <p></p> <p>To prevent it disable client device isolation in WiFi settings.</p> <p></p>"}]}